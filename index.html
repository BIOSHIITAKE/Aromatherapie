<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulation clinique d'huiles essentielles</title>
<style>
  body {font-family: system-ui, -apple-system, Roboto, Arial; margin:0; padding:2rem; background:#f8f8f8;}
  h1 {text-align:center; margin-bottom:1rem;}
  .controls {text-align:center; margin-bottom:1rem;}
  input {padding:0.5rem; width:80%; max-width:400px; border-radius:8px; border:1px solid #ccc;}
  .grid {display:grid; grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:1rem;}
  .card {background:white; border:1px solid #ddd; border-radius:12px; padding:1rem; box-shadow:0 2px 5px rgba(0,0,0,0.05);}
  .card h3 {margin:0 0 .3rem;}
  .card small {color:#666;}
  .family {color:#2a7; font-weight:500;}
  table {width:100%; border-collapse:collapse; margin-top:1rem; background:white;}
  th, td {border:1px solid #ccc; padding:0.5rem; text-align:center;}
  th {background:#eee;}
  .summary {margin-top:1rem; padding:1rem; background:white; border-radius:12px; border:1px solid #ddd;}
</style>
</head>
<body>

<h1>üß™ Formulation clinique d'huiles essentielles</h1>

<div class="controls">
  <input type="text" id="search" placeholder="Recherche par nom, mol√©cules, propri√©t√©s‚Ä¶">
</div>

<div id="listeHE" class="grid"></div>

<h2>M√©lange s√©lectionn√©</h2>
<table id="melangeTable">
  <thead>
    <tr>
      <th>HE</th>
      <th>Mol√©cules principales</th>
      <th>Propri√©t√©s</th>
      <th>Indications</th>
      <th>Voie d'utilisation</th>
      <th>Supprimer</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="summary" id="resume">
  <strong>R√©sum√© des mol√©cules cumul√©es et propri√©t√©s :</strong>
  <div id="moleculesCumul"></div>
  <div id="proprietesCumul"></div>
</div>

<script>
const huiles = [
  {
    nom:"Lavande vraie", latin:"Lavandula angustifolia", famille:"Lamiaceae",
    molecules:[{nom:"Linalol",pct:35},{nom:"Ac√©tate de linalyle",pct:40}],
    proprietes:["Calmante","Antispasmodique","R√©g√©n√©ratrice cutan√©e"],
    indications:["Stress","Troubles du sommeil"],
    voies:["Voie cutan√©e","Voie olfactive"]
  },
  {
    nom:"Tea tree", latin:"Melaleuca alternifolia", famille:"Myrtaceae",
    molecules:[{nom:"Terpin√®ne-4-ol",pct:40},{nom:"Œ≥-Terpin√®ne",pct:20}],
    proprietes:["Antibact√©rienne","Antifongique","Immunostimulante"],
    indications:["Infections cutan√©es","Acn√©"],
    voies:["Voie cutan√©e","Diffusion"]
  },
  {
    nom:"Menthe poivr√©e", latin:"Mentha √ó piperita", famille:"Lamiaceae",
    molecules:[{nom:"Menthol",pct:40},{nom:"Menthone",pct:20}],
    proprietes:["Tonique","Digestive","Antalgique locale"],
    indications:["Maux de t√™te","Troubles digestifs"],
    voies:["Voie cutan√©e","Voie orale dilu√©e"]
  },
  {
    nom:"Citron", latin:"Citrus limon", famille:"Rutaceae",
    molecules:[{nom:"Limon√®ne",pct:65},{nom:"Œ≤-pin√®ne",pct:10}],
    proprietes:["Tonique","D√©purative","Antiseptique a√©rienne"],
    indications:["Fatigue","Digestif"],
    voies:["Diffusion","Voie cutan√©e"]
  },
  {
    nom:"Ylang-ylang compl√®te", latin:"Cananga odorata", famille:"Annonaceae",
    molecules:[{nom:"Germacr√®ne D",pct:15},{nom:"Benzoate de benzyle",pct:10}],
    proprietes:["Relaxante","Hypotensive","Aphrodisiaque"],
    indications:["Stress","Hypertension"],
    voies:["Voie cutan√©e","Diffusion"]
  }
];

let melange = [];

function renderListe() {
  const search = document.getElementById("search").value.toLowerCase();
  const container = document.getElementById("listeHE");
  container.innerHTML="";
  huiles.filter(h=>h.nom.toLowerCase().includes(search) || h.molecules.some(m=>m.nom.toLowerCase().includes(search)) || h.proprietes.join(" ").toLowerCase().includes(search))
        .forEach(h=>{
    const card = document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <h3>${h.nom}</h3>
      <small><em>${h.latin}</em></small>
      <p class="family">${h.famille}</p>
      <p><strong>Mol√©cules :</strong> ${h.molecules.map(m=>m.nom+" ("+m.pct+"%)").join(", ")}</p>
      <p><strong>Propri√©t√©s :</strong> ${h.proprietes.join(", ")}</p>
      <p><strong>Indications :</strong> ${h.indications.join(", ")}</p>
      <p><strong>Voies :</strong> ${h.voies.join(", ")}</p>
      <button onclick="ajouterMelange('${h.nom}')">Ajouter au m√©lange</button>
    `;
    container.appendChild(card);
  });
}

function ajouterMelange(nomHE) {
  const he = huiles.find(h=>h.nom===nomHE);
  if(!melange.includes(he)) melange.push(he);
  renderMelange();
}

function supprimerHE(index) {
  melange.splice(index,1);
  renderMelange();
}

function renderMelange() {
  const tbody = document.querySelector("#melangeTable tbody");
  tbody.innerHTML="";
  let cumulMolecules = {};
  let cumulProprietes = new Set();
  melange.forEach((h,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML=`
      <td>${h.nom}</td>
      <td>${h.molecules.map(m=>m.nom+" ("+m.pct+"%)").join(", ")}</td>
      <td>${h.proprietes.join(", ")}</td>
      <td>${h.indications.join(", ")}</td>
      <td>${h.voies.join(", ")}</td>
      <td><button onclick="supprimerHE(${i})">‚ùå</button></td>
    `;
    tbody.appendChild(tr);
    h.molecules.forEach(m=>{
      cumulMolecules[m.nom] = (cumulMolecules[m.nom]||0)+m.pct;
    });
    h.proprietes.forEach(p=>cumulProprietes.add(p));
  });
  document.getElementById("moleculesCumul").innerHTML="<strong>Mol√©cules cumul√©es :</strong> "+Object.entries(cumulMolecules).map(([k,v])=>k+" ("+v+"%)").join(", ");
  document.getElementById("proprietesCumul").innerHTML="<strong>Propri√©t√©s du m√©lange :</strong> "+Array.from(cumulProprietes).join(", ");
}

document.getElementById("search").addEventListener("input", renderListe);
renderListe();
</script>

</body>
</html>
